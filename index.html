<!doctype html>
<html lang="th">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GearZone - Home</title>
    <link rel="stylesheet" href="/~cs6636089/GearZone/frontend/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>

<body>
    <header class="header">
        <div class="container navbar">
            <div class="brand">GEARZONE</div>
            <div id="navbar-container"></div>
        </div>
    </header>
    <main>
        <section class="hero container">
            <span class="hot">HOT DEALS 2025</span>
            <h2>Gaming Gear</h2>
            <p>“ครบจบทุกเกมมิ่งเกียร์ – สั่งง่าย ส่งไว โดนใจสายเกมเมอร์”</p>
            <div class="cta-row">
                <a class="btn btn--primary" href="/~cs6636089/GearZone/frontend/categories.html">เลือกซื้อสินค้า</a>
                <a class="btn btn--ghost" href="#promos">โปรโมชั่นพิเศษ</a>
            </div>
        </section>

        <section class="container" id="popular">
            <div class="section-title">
                <h3>โปรโมชั่นพิเศษ ชิ้นที่ 2 ลด 50%</h3>
            </div>
            <div class="grid promo-grid" id="product-grid"></div>
            </div>
        </section>

        <section class="container">
            <div class="section-title">
                <h3 id="promos">บริการของเรา</h3>
                <p>บริการที่คัดมาเพื่อลูกค้าเกมเมอร์</p>
            </div>
            <div class="features">
                <div class="feature">
                    <h4>จัดส่งรวดเร็ว</h4>
                    <p class="small">ส่งด่วนทุกออเดอร์ ได้รับภายใน 1-2 วัน</p>
                </div>

                <div class="feature">
                    <h4>ของแท้ 100%</h4>
                    <p class="small">รับประกันสินค้าแท้ทุกรายการ มีใบรับรอง</p>
                </div>

                <div class="feature">
                    <h4>โปรโมชั่นพิเศษ</h4>
                    <p class="small">ส่วนลดและของแถมสุดคุ้ม ทุกเดือน</p>
                </div>
            </div>
        </section>

        <section class="container" id="json-products">
            <div class="section-title">
                <h3>สินค้าจากข้อมูล JSON (ตัวอย่าง)</h3>
                <p>ข้อมูลดึงจากไฟล์ PHP ที่ส่งออกเป็น JSON</p>
            </div>
            <div class="grid" id="json-grid"></div>
        </section>

    </main>

    <footer class="footer">
        <div class="footer-left">GEARZONE</div><br>
        <div class="footer-right">&copy; 2025 GearZone. สงวนลิขสิทธิ์.</div>
    </footer>

    <script>
        // Navbar 
        (function () {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    document.getElementById("navbar-container").innerHTML = xhr.responseText;
                }
            };
            xhr.open("GET", "/~cs6636089/GearZone/backend/navbar.php", true);
            xhr.withCredentials = true;
            xhr.send();
        })();

        // โหลดการ์ดโปรค้างสต็อก
        (function () {
            var xhr2 = new XMLHttpRequest();
            xhr2.onreadystatechange = function () {
                if (xhr2.readyState === 4 && xhr2.status === 200) {
                    document.getElementById("product-grid").innerHTML = xhr2.responseText;
                }
            };
            xhr2.open("GET", "/~cs6636089/GearZone/backend/promos_overstock.php", true);
            xhr2.withCredentials = true;
            xhr2.send();
        })();
    </script>

    <script>
        fetch('/~cs6636089/GearZone/backend/json_products.php')
            .then(res => res.text())
            .then(txt => {
                const data = JSON.parse(txt);
                console.log(data);

                let html = "";
                data.forEach(p => {
                    html += `
        <div style="background:white; border:1px solid #ccc; border-radius:10px; width:200px; margin:10px; padding:10px; text-align:center;">
          <h4 style="color:black;">${p.product_name}</h4>
          <p style="color:red;">฿${p.price}</p>
        </div>`;
                });

                document.getElementById("json-grid").innerHTML = html;
            });
    </script>

</body>

</html>